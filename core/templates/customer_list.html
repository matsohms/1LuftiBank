<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Kundenübersicht</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f7f7f7; }
    .container { background: #eee; padding:20px; margin:40px auto; width: 90%; max-width: 800px; }
    .search { margin-bottom: 15px; }
    .search input { padding: 8px; width: 200px; margin-right: 5px; border:1px solid #ccc; }
    .search button { padding: 8px 12px; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    tr:nth-child(odd)  { background:#ddd; }
    tr:nth-child(even) { background:#ccc; }
    th, td { padding:12px; text-align:left; }
    button { border:none; padding:8px 16px; font-family:Arial; margin:4px; }
    .btn-primary   { background:#007bff; color:#fff; }
    .btn-secondary { background:#6c757d; color:#fff; }
    .btn-danger    { background:#343a40; color:#fff; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kundenübersicht</h1>

    <!-- Suchleiste -->
    <form method="get" class="search">
      <input type="text" name="q"
             placeholder="Suche nach Name oder Nr."
             value="{{ q }}" />
      <button type="submit">Suchen</button>
      <a href="{% url 'customer_list' %}">
        <button type="button">Zurücksetzen</button>
      </a>
    </form>

    <!-- Neuen Kunden anlegen -->
    <a href="{% url 'customer_create' %}">
      <button class="btn-primary">Kunde hinzufügen</button>
    </a>

    <!-- Tabelle -->
    <table>
      <tr>
        <th>Name</th>
        <th>Kundennr.</th>
        <th>Aktion</th>
      </tr>
      {% for c in customers %}
      <tr>
        <td>{{ c.last_name }}, {{ c.first_name }}</td>
        <td>{{ c.customer_number }}</td>
        <td>
          <a href="{% url 'customer_detail' c.pk %}">
            <button class="btn-secondary">Profil</button>
          </a>
          {% if c.security_level != 'none' %}
            <a href="{% url 'customer_security' c.pk %}" target="_blank">
              <button class="btn-secondary">Prüfung</button>
            </a>
          {% endif %}
          <a href="{% url 'customer_delete' c.pk %}">
            <button class="btn-danger">Löschen</button>
          </a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="3">Keine Kunden gefunden.</td></tr>
      {% endfor %}
    </table>

  </div>
</body>
</html>
